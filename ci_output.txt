41 files left unchanged
S105 Possible hardcoded password assigned to: "TOKEN_KEY_SUFFIX"
  --> comms/adapters/email/gmail.py:22:20
   |
20 | ]
21 | SERVICE_NAME = "comms-cli/gmail"
22 | TOKEN_KEY_SUFFIX = "/token"
   |                    ^^^^^^^^
23 | CREDENTIALS_PATH = Path.home() / "space/repos/comms-cli/gmail_credentials.json"
   |

S105 Possible hardcoded password assigned to: "TOKEN_KEY_SUFFIX"
  --> comms/adapters/email/outlook.py:18:20
   |
17 | SERVICE_NAME = "comms-cli/outlook"
18 | TOKEN_KEY_SUFFIX = "/token"
   |                    ^^^^^^^^
19 | CLIENT_ID_SUFFIX = "/client_id"
20 | CLIENT_SECRET_SUFFIX = "/client_secret"
   |

S105 Possible hardcoded password assigned to: "CLIENT_SECRET_SUFFIX"
  --> comms/adapters/email/outlook.py:20:24
   |
18 | TOKEN_KEY_SUFFIX = "/token"
19 | CLIENT_ID_SUFFIX = "/client_id"
20 | CLIENT_SECRET_SUFFIX = "/client_secret"
   |                        ^^^^^^^^^^^^^^^^
   |

FURB162 Unnecessary timezone replacement with zero offset
   --> comms/adapters/email/outlook.py:179:45
    |
177 |         if received:
178 |             try:
179 |                 dt = datetime.fromisoformat(received.replace("Z", "+00:00"))
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
180 |                 timestamp = int(dt.timestamp() * 1000)
181 |             except ValueError:
    |
help: Remove `.replace()` call

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/email/resend.py:26:9
   |
25 |     try:
26 |         import httpx
   |         ^^^^^^^^^^^^
27 |
28 |         resp = httpx.get(
   |

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/email/resend.py:49:9
   |
48 |     try:
49 |         import httpx
   |         ^^^^^^^^^^^^
50 |
51 |         resp = httpx.post(
   |

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/messaging/signal.py:11:5
   |
10 | def _store_messages(phone: str, messages: list[dict]) -> int:
11 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
12 |
13 |     stored = 0
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/adapters/messaging/signal.py:11:5
   |
10 | def _store_messages(phone: str, messages: list[dict]) -> int:
11 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
12 |
13 |     stored = 0
   |
help: Replace relative imports from parent modules with absolute imports

S110 `try`-`except`-`pass` detected, consider logging the exception
  --> comms/adapters/messaging/signal.py:35:13
   |
33 |                   )
34 |                   stored += 1
35 | /             except Exception:
36 | |                 pass
   | |____________________^
37 |       return stored
   |

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/messaging/signal.py:46:5
   |
44 |     unread_only: bool = False,
45 | ) -> list[dict]:
46 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
47 |
48 |     query = "SELECT * FROM signal_messages WHERE 1=1"
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/adapters/messaging/signal.py:46:5
   |
44 |     unread_only: bool = False,
45 | ) -> list[dict]:
46 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
47 |
48 |     query = "SELECT * FROM signal_messages WHERE 1=1"
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/messaging/signal.py:69:5
   |
68 | def get_message(message_id: str) -> dict | None:
69 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
70 |
71 |     with get_db() as conn:
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/adapters/messaging/signal.py:69:5
   |
68 | def get_message(message_id: str) -> dict | None:
69 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
70 |
71 |     with get_db() as conn:
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/adapters/messaging/signal.py:80:5
   |
79 | def mark_read(message_id: str) -> bool:
80 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
81 |
82 |     with get_db() as conn:
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/adapters/messaging/signal.py:80:5
   |
79 | def mark_read(message_id: str) -> bool:
80 |     from ...db import get_db
   |     ^^^^^^^^^^^^^^^^^^^^^^^^
81 |
82 |     with get_db() as conn:
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/adapters/messaging/signal.py:105:5
    |
104 | def get_conversations(phone: str) -> list[dict]:
105 |     from ...db import get_db
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
106 |
107 |     with get_db() as conn:
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/adapters/messaging/signal.py:105:5
    |
104 | def get_conversations(phone: str) -> list[dict]:
105 |     from ...db import get_db
    |     ^^^^^^^^^^^^^^^^^^^^^^^^
106 |
107 |     with get_db() as conn:
    |
help: Replace relative imports from parent modules with absolute imports

PERF401 Use a list comprehension to create a transformed list
   --> comms/adapters/messaging/signal.py:154:13
    |
152 |     for line in result.stdout.strip().split("\n"):
153 |         if line.startswith("Number: "):
154 |             accounts.append(line.replace("Number: ", "").strip())
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
155 |     return accounts
    |
help: Replace for loop with list comprehension

PLC0415 `import` should be at the top-level of a file
   --> comms/adapters/messaging/signal.py:186:5
    |
185 | def link(device_name: str = "comms-cli") -> tuple[bool, str]:
186 |     import io
    |     ^^^^^^^^^
187 |
188 |     import qrcode
    |

PLC0415 `import` should be at the top-level of a file
   --> comms/adapters/messaging/signal.py:188:5
    |
186 |     import io
187 |
188 |     import qrcode
    |     ^^^^^^^^^^^^^
189 |
190 |     process = subprocess.Popen(
    |

PIE810 Call `startswith` once with a `tuple`
   --> comms/adapters/messaging/signal.py:201:16
    |
199 |         for line in iter(process.stdout.readline, ""):
200 |             line = line.strip()
201 |             if line.startswith("sgnl://") or line.startswith("tsdevice:"):
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
202 |                 uri = line
203 |                 break
    |
help: Merge into a single `startswith` call

T201 `print` found
   --> comms/adapters/messaging/signal.py:216:5
    |
214 |     f = io.StringIO()
215 |     qr.print_ascii(out=f, invert=True)
216 |     print(f.getvalue())
    |     ^^^^^
217 |
218 |     try:
    |
help: Remove `print`

PLC0415 `import` should be at the top-level of a file
   --> comms/adapters/messaging/signal.py:229:5
    |
228 | def receive(phone: str, timeout: int = 1, store: bool = True) -> list[dict]:
229 |     import re
    |     ^^^^^^^^^
230 |
231 |     result = subprocess.run(
    |

PIE810 Call `startswith` once with a `tuple`
  --> comms/agent.py:52:12
   |
50 | def is_command(text: str) -> bool:
51 |     text = text.strip().lower()
52 |     return text.startswith("!") or text.startswith("comms ")
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
help: Merge into a single `startswith` call

PLC0415 `import` should be at the top-level of a file
  --> comms/agent.py:94:5
   |
93 | def parse_natural_language(text: str) -> Command | None:
94 |     import json
   |     ^^^^^^^^^^^
95 |
96 |     prompt = f"""Parse this message into a comms command. Return JSON only.
   |

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/__init__.py:5:1
  |
3 | import typer
4 |
5 | from .. import db
  | ^^^^^^^^^^^^^^^^^
6 | from .accounts import app as accounts_app
7 | from .daemon import app as daemon_app
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/accounts.py:5:1
  |
3 | import typer
4 |
5 | from .. import accounts as accts_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 | from ..adapters.email import gmail, outlook
7 | from ..adapters.messaging import signal
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/accounts.py:6:1
  |
5 | from .. import accounts as accts_module
6 | from ..adapters.email import gmail, outlook
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7 | from ..adapters.messaging import signal
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/accounts.py:6:1
  |
5 | from .. import accounts as accts_module
6 | from ..adapters.email import gmail, outlook
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7 | from ..adapters.messaging import signal
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/accounts.py:7:1
  |
5 | from .. import accounts as accts_module
6 | from ..adapters.email import gmail, outlook
7 | from ..adapters.messaging import signal
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 |
9 | app = typer.Typer()
  |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:11:5
   |
 9 | def agent_authorize(phone: str = typer.Argument(..., help="Phone number to authorize")):
10 |     """Authorize a phone number to send commands"""
11 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
12 |
13 |     agent.add_authorized_sender(phone)
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:11:5
   |
 9 | def agent_authorize(phone: str = typer.Argument(..., help="Phone number to authorize")):
10 |     """Authorize a phone number to send commands"""
11 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
12 |
13 |     agent.add_authorized_sender(phone)
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:20:5
   |
18 | def agent_revoke(phone: str = typer.Argument(..., help="Phone number to revoke")):
19 |     """Revoke command authorization from a phone number"""
20 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
21 |
22 |     if agent.remove_authorized_sender(phone):
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:20:5
   |
18 | def agent_revoke(phone: str = typer.Argument(..., help="Phone number to revoke")):
19 |     """Revoke command authorization from a phone number"""
20 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
21 |
22 |     if agent.remove_authorized_sender(phone):
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:31:5
   |
29 | def agent_list():
30 |     """List authorized command senders"""
31 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
32 |
33 |     senders = agent.get_authorized_senders()
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:31:5
   |
29 | def agent_list():
30 |     """List authorized command senders"""
31 |     from .. import agent
   |     ^^^^^^^^^^^^^^^^^^^^
32 |
33 |     senders = agent.get_authorized_senders()
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:49:5
   |
47 | ):
48 |     """Configure agent settings"""
49 |     from ..config import get_agent_config, set_agent_config
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
50 |
51 |     config = get_agent_config()
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:49:5
   |
47 | ):
48 |     """Configure agent settings"""
49 |     from ..config import get_agent_config, set_agent_config
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
50 |
51 |     config = get_agent_config()
   |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:49:5
   |
47 | ):
48 |     """Configure agent settings"""
49 |     from ..config import get_agent_config, set_agent_config
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
50 |
51 |     config = get_agent_config()
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:70:5
   |
68 | ):
69 |     """Start Signal daemon (background polling)"""
70 |     from .. import daemon
   |     ^^^^^^^^^^^^^^^^^^^^^
71 |
72 |     success, msg = daemon.start(interval=interval, foreground=foreground)
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:70:5
   |
68 | ):
69 |     """Start Signal daemon (background polling)"""
70 |     from .. import daemon
   |     ^^^^^^^^^^^^^^^^^^^^^
71 |
72 |     success, msg = daemon.start(interval=interval, foreground=foreground)
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:81:5
   |
79 | def daemon_stop():
80 |     """Stop Signal daemon"""
81 |     from .. import daemon
   |     ^^^^^^^^^^^^^^^^^^^^^
82 |
83 |     success, msg = daemon.stop()
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:81:5
   |
79 | def daemon_stop():
80 |     """Stop Signal daemon"""
81 |     from .. import daemon
   |     ^^^^^^^^^^^^^^^^^^^^^
82 |
83 |     success, msg = daemon.stop()
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/daemon.py:92:5
   |
90 | def daemon_status():
91 |     """Show daemon status"""
92 |     from .. import daemon, launchd
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
93 |
94 |     s = daemon.status()
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:92:5
   |
90 | def daemon_status():
91 |     """Show daemon status"""
92 |     from .. import daemon, launchd
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
93 |
94 |     s = daemon.status()
   |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/daemon.py:92:5
   |
90 | def daemon_status():
91 |     """Show daemon status"""
92 |     from .. import daemon, launchd
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
93 |
94 |     s = daemon.status()
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/daemon.py:116:5
    |
114 | ):
115 |     """Install daemon as launchd service (auto-start on boot)"""
116 |     from .. import launchd
    |     ^^^^^^^^^^^^^^^^^^^^^^
117 |
118 |     success, msg = launchd.install(interval=interval)
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/daemon.py:116:5
    |
114 | ):
115 |     """Install daemon as launchd service (auto-start on boot)"""
116 |     from .. import launchd
    |     ^^^^^^^^^^^^^^^^^^^^^^
117 |
118 |     success, msg = launchd.install(interval=interval)
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/daemon.py:127:5
    |
125 | def daemon_uninstall():
126 |     """Uninstall daemon launchd service"""
127 |     from .. import launchd
    |     ^^^^^^^^^^^^^^^^^^^^^^
128 |
129 |     success, msg = launchd.uninstall()
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/daemon.py:127:5
    |
125 | def daemon_uninstall():
126 |     """Uninstall daemon launchd service"""
127 |     from .. import launchd
    |     ^^^^^^^^^^^^^^^^^^^^^^
128 |
129 |     success, msg = launchd.uninstall()
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/drafts.py:5:1
  |
3 | import typer
4 |
5 | from .. import drafts as drafts_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 | from .. import policy, services
7 | from .helpers import run_service
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/drafts.py:6:1
  |
5 | from .. import drafts as drafts_module
6 | from .. import policy, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7 | from .helpers import run_service
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/drafts.py:6:1
  |
5 | from .. import drafts as drafts_module
6 | from .. import policy, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7 | from .helpers import run_service
  |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/drafts.py:135:5
    |
133 | ):
134 |     """Generate reply draft using Claude"""
135 |     from .. import claude
    |     ^^^^^^^^^^^^^^^^^^^^^
136 |
137 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/drafts.py:135:5
    |
133 | ):
134 |     """Generate reply draft using Claude"""
135 |     from .. import claude
    |     ^^^^^^^^^^^^^^^^^^^^^
136 |
137 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/email.py:5:1
  |
3 | import typer
4 |
5 | from .. import audit, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 | from .helpers import run_service
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/email.py:5:1
  |
3 | import typer
4 |
5 | from .. import audit, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 | from .helpers import run_service
  |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/email.py:51:5
   |
49 | def summarize(thread_id: str, email: str = typer.Option(None, "--email", "-e")):
50 |     """Summarize thread using Claude"""
51 |     from .. import claude
   |     ^^^^^^^^^^^^^^^^^^^^^
52 |
53 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/email.py:51:5
   |
49 | def summarize(thread_id: str, email: str = typer.Option(None, "--email", "-e")):
50 |     """Summarize thread using Claude"""
51 |     from .. import claude
   |     ^^^^^^^^^^^^^^^^^^^^^
52 |
53 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/email.py:70:5
   |
68 | ):
69 |     """Snooze thread until later"""
70 |     from .. import snooze as snooze_module
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
71 |
72 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/email.py:70:5
   |
68 | ):
69 |     """Snooze thread until later"""
70 |     from .. import snooze as snooze_module
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
71 |
72 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
   |
help: Replace relative imports from parent modules with absolute imports

RUF059 Unpacked variable `snooze_id` is never used
  --> comms/cli/email.py:73:5
   |
72 |     full_id = run_service(services.resolve_thread_id, thread_id, email) or thread_id
73 |     snooze_id, snooze_until = snooze_module.snooze_item(
   |     ^^^^^^^^^
74 |         entity_type="thread",
75 |         entity_id=full_id,
   |
help: Prefix it with an underscore or any other dummy variable pattern

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/email.py:85:5
   |
83 | def snoozed():
84 |     """List snoozed threads"""
85 |     from .. import snooze as snooze_module
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
86 |
87 |     items = snooze_module.get_snoozed_items()
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/email.py:85:5
   |
83 | def snoozed():
84 |     """List snoozed threads"""
85 |     from .. import snooze as snooze_module
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
86 |
87 |     items = snooze_module.get_snoozed_items()
   |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/helpers.py:5:1
  |
3 | import typer
4 |
5 | from .. import accounts as accts_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/proposals.py:5:1
  |
3 | import typer
4 |
5 | from .. import proposals as proposals_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 | from .. import services
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/proposals.py:6:1
  |
5 | from .. import proposals as proposals_module
6 | from .. import services
  | ^^^^^^^^^^^^^^^^^^^^^^^
7 |
8 | app = typer.Typer()
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/signal.py:7:1
  |
5 | import typer
6 |
7 | from ..adapters.messaging import signal as signal_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 | from .helpers import get_signal_phone
  |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/signal.py:125:5
    |
123 | ):
124 |     """Generate Signal reply using Claude"""
125 |     from .. import claude
    |     ^^^^^^^^^^^^^^^^^^^^^
126 |
127 |     phone = get_signal_phone(phone)
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/signal.py:125:5
    |
123 | ):
124 |     """Generate Signal reply using Claude"""
125 |     from .. import claude
    |     ^^^^^^^^^^^^^^^^^^^^^
126 |
127 |     phone = get_signal_phone(phone)
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/system.py:7:1
  |
5 | import typer
6 |
7 | from .. import accounts as accts_module
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 | from .. import db, services
9 | from ..adapters.email import gmail, outlook
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/system.py:8:1
  |
7 | from .. import accounts as accts_module
8 | from .. import db, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
9 | from ..adapters.email import gmail, outlook
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
 --> comms/cli/system.py:8:1
  |
7 | from .. import accounts as accts_module
8 | from .. import db, services
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
9 | from ..adapters.email import gmail, outlook
  |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/system.py:9:1
   |
 7 | from .. import accounts as accts_module
 8 | from .. import db, services
 9 | from ..adapters.email import gmail, outlook
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | app = typer.Typer()
   |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/system.py:9:1
   |
 7 | from .. import accounts as accts_module
 8 | from .. import db, services
 9 | from ..adapters.email import gmail, outlook
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | app = typer.Typer()
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/system.py:75:5
   |
73 | def rules():
74 |     """Show triage rules (edit at ~/.comms/rules.md)"""
75 |     from ..config import RULES_PATH
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
76 |
77 |     if not RULES_PATH.exists():
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/system.py:75:5
   |
73 | def rules():
74 |     """Show triage rules (edit at ~/.comms/rules.md)"""
75 |     from ..config import RULES_PATH
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
76 |
77 |     if not RULES_PATH.exists():
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
  --> comms/cli/system.py:87:5
   |
85 | def contacts():
86 |     """Show contact notes (edit at ~/.comms/contacts.md)"""
87 |     from ..contacts import CONTACTS_PATH, get_all_contacts
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
88 |
89 |     if not CONTACTS_PATH.exists():
   |

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/system.py:87:5
   |
85 | def contacts():
86 |     """Show contact notes (edit at ~/.comms/contacts.md)"""
87 |     from ..contacts import CONTACTS_PATH, get_all_contacts
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
88 |
89 |     if not CONTACTS_PATH.exists():
   |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
  --> comms/cli/system.py:87:5
   |
85 | def contacts():
86 |     """Show contact notes (edit at ~/.comms/contacts.md)"""
87 |     from ..contacts import CONTACTS_PATH, get_all_contacts
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
88 |
89 |     if not CONTACTS_PATH.exists():
   |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:115:5
    |
113 | def templates(init: bool = typer.Option(False, "--init", help="Create default templates file")):
114 |     """Show reply templates (edit at ~/.comms/templates.md)"""
115 |     from ..templates import TEMPLATES_PATH, get_templates, init_templates
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
116 |
117 |     if init:
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:115:5
    |
113 | def templates(init: bool = typer.Option(False, "--init", help="Create default templates file")):
114 |     """Show reply templates (edit at ~/.comms/templates.md)"""
115 |     from ..templates import TEMPLATES_PATH, get_templates, init_templates
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
116 |
117 |     if init:
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:115:5
    |
113 | def templates(init: bool = typer.Option(False, "--init", help="Create default templates file")):
114 |     """Show reply templates (edit at ~/.comms/templates.md)"""
115 |     from ..templates import TEMPLATES_PATH, get_templates, init_templates
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
116 |
117 |     if init:
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:115:5
    |
113 | def templates(init: bool = typer.Option(False, "--init", help="Create default templates file")):
114 |     """Show reply templates (edit at ~/.comms/templates.md)"""
115 |     from ..templates import TEMPLATES_PATH, get_templates, init_templates
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
116 |
117 |     if init:
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:136:5
    |
134 | def status():
135 |     """Show system status"""
136 |     from ..config import get_policy
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
137 |
138 |     pol = get_policy()
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:136:5
    |
134 | def status():
135 |     """Show system status"""
136 |     from ..config import get_policy
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
137 |
138 |     pol = get_policy()
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:163:5
    |
161 | ):
162 |     """Configure auto-approve settings"""
163 |     from ..config import get_policy, set_policy
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
164 |
165 |     pol = get_policy()
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:163:5
    |
161 | ):
162 |     """Configure auto-approve settings"""
163 |     from ..config import get_policy, set_policy
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
164 |
165 |     pol = get_policy()
    |
help: Replace relative imports from parent modules with absolute imports

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:163:5
    |
161 | ):
162 |     """Configure auto-approve settings"""
163 |     from ..config import get_policy, set_policy
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
164 |
165 |     pol = get_policy()
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:189:5
    |
187 | def stats():
188 |     """Show learning stats from decisions"""
189 |     from .. import learning
    |     ^^^^^^^^^^^^^^^^^^^^^^^
190 |
191 |     action_stats = learning.get_decision_stats()
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:189:5
    |
187 | def stats():
188 |     """Show learning stats from decisions"""
189 |     from .. import learning
    |     ^^^^^^^^^^^^^^^^^^^^^^^
190 |
191 |     action_stats = learning.get_decision_stats()
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:217:5
    |
215 | def senders(limit: int = typer.Option(20, "--limit", "-n")):
216 |     """Show sender statistics and priority scores"""
217 |     from .. import senders
    |     ^^^^^^^^^^^^^^^^^^^^^^
218 |
219 |     top = senders.get_top_senders(limit=limit)
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:217:5
    |
215 | def senders(limit: int = typer.Option(20, "--limit", "-n")):
216 |     """Show sender statistics and priority scores"""
217 |     from .. import senders
    |     ^^^^^^^^^^^^^^^^^^^^^^
218 |
219 |     top = senders.get_top_senders(limit=limit)
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:244:5
    |
242 | def audit_log(limit: int = 20):
243 |     """Show recent audit log"""
244 |     from .. import audit
    |     ^^^^^^^^^^^^^^^^^^^^
245 |
246 |     logs = audit.get_recent_logs(limit)
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:244:5
    |
242 | def audit_log(limit: int = 20):
243 |     """Show recent audit log"""
244 |     from .. import audit
    |     ^^^^^^^^^^^^^^^^^^^^
245 |
246 |     logs = audit.get_recent_logs(limit)
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:257:5
    |
255 | def digest(days: int = typer.Option(7, "--days", "-d", help="Number of days to summarize")):
256 |     """Weekly activity digest"""
257 |     from .. import digest as digest_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
258 |
259 |     stats = digest_module.get_digest(days=days)
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:257:5
    |
255 | def digest(days: int = typer.Option(7, "--days", "-d", help="Number of days to summarize")):
256 |     """Weekly activity digest"""
257 |     from .. import digest as digest_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
258 |
259 |     stats = digest_module.get_digest(days=days)
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:271:5
    |
269 | ):
270 |     """Triage inbox — Claude bulk-proposes actions"""
271 |     from .. import triage as triage_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
272 |
273 |     typer.echo("Scanning inbox...")
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:271:5
    |
269 | ):
270 |     """Triage inbox — Claude bulk-proposes actions"""
271 |     from .. import triage as triage_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
272 |
273 |     typer.echo("Scanning inbox...")
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:314:5
    |
312 | ):
313 |     """One-command inbox clear: triage → approve → execute"""
314 |     from .. import proposals as proposals_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
315 |     from .. import triage as triage_module
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:314:5
    |
312 | ):
313 |     """One-command inbox clear: triage → approve → execute"""
314 |     from .. import proposals as proposals_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
315 |     from .. import triage as triage_module
    |
help: Replace relative imports from parent modules with absolute imports

PLC0415 `import` should be at the top-level of a file
   --> comms/cli/system.py:315:5
    |
313 |     """One-command inbox clear: triage → approve → execute"""
314 |     from .. import proposals as proposals_module
315 |     from .. import triage as triage_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
316 |
317 |     typer.echo("Scanning inbox...")
    |

TID252 Prefer absolute imports over relative imports from parent modules
   --> comms/cli/system.py:315:5
    |
313 |     """One-command inbox clear: triage → approve → execute"""
314 |     from .. import proposals as proposals_module
315 |     from .. import triage as triage_module
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
316 |
317 |     typer.echo("Scanning inbox...")
    |
help: Replace relative imports from parent modules with absolute imports

RUF012 Mutable class attributes should be annotated with `typing.ClassVar`
  --> comms/config.py:14:19
   |
12 | class Config:
13 |     _instance: "Config | None" = None
14 |     _data: dict = {}
   |                   ^^
15 |
16 |     def __new__(cls):
   |

Found 104 errors.
No fixes available (61 hidden fixes can be enabled with the `--unsafe-fixes` option).
error: Recipe `lint` failed with exit code 1
error: Recipe `ci` failed with exit code 1
